---
title: "Clustering Analysis - Late Order Acknowledgement"
author: "Sangho Lee"
output:
  html_document:
    df_print: paged
---


```{css, echo=FALSE}
body {
  font-family: 'Verdana', sans-serif;
}

#footer {
position: fixed;
left: 0;
bottom: 0;
width: 100%;
background-color: #f2f2f2; /* You can change the background color */
  color: black; /* Text color */
  text-align: center;
padding: 10px 0;
font-size: 1.2em;
}

```

------------------------------------------------------------------------

------------------------------------------------------------------------



### Problem Statement: <br>
In the competitive landscape of order processing, the promptness and efficiency of acknowledging orders are pivotal for sustaining high customer satisfaction and operational effectiveness. However, an analysis of this sample dataset reveals a concerning trend: a significant portion of order acknowledgments are not being made on time. This inefficiency poses a risk not only to customer satisfaction but also to the reliability of the order fulfillment process. The aim of this analysis is to examine into the underlying causes of these delays by examining the days it takes to acknowledge orders and exploring variations across different dimensions such as profile owner, location, and leader. Through descriptive analysis and K-means clustering, we seek to uncover patterns, bottlenecks, and actionable insights that can ultimately lead to process optimizations. Identifying distinct clusters of order behaviors and acknowledgment times will allow us to pinpoint specific areas for improvement, thereby enhancing process efficiencies and ensuring timely order acknowledgments. The ultimate goal is to transform these insights into strategic actions that elevate operational performance and customer service levels.<br><br>

### Analysis Steps:<br>
1. Load the Data into R <br>

2. Descriptive Analysis <br>
Conduct a thorough descriptive analysis to gain a foundational understanding of the dataset. This includes generating summary statistics, analyzing the distribution of days to acknowledge across various factors, and visualizing data to uncover initial insights and patterns.<br>

3. Determine the Optimal Number of Clusters Using Methods Like the Elbow Method:<br>
Utilize the Elbow method to ascertain the optimal number of clusters for the dataset. This technique helps identify a point where increasing the number of clusters does not significantly improve the model's fit, balancing between simplicity and explanatory power.<br>

4. Perform K-means Clustering:<br>
Apply K-means clustering to segment orders based on acknowledgment times and other relevant characteristics. This unsupervised learning approach will categorize orders into clusters with similar features, revealing inherent groupings within the data.<br>

5. Analyze the Resulting Clusters to Interpret Different Groupings of Orders:<br>
In the final step, examine the characteristics and patterns of the identified clusters. This detailed analysis aims to interpret different groupings of orders based on acknowledgment times and additional factors, identifying strategic areas where targeted improvements can significantly enhance acknowledgment timeliness and overall process efficiency.<br>


## 1. Load the data into R.<br>
After loading these essential libraries, we can proceed to load and initially inspect our dataset. The dataset, order_late, contains information about order acknowledgments, including whether they were made on time or not. The dataset also includes details about the profile owner, leader, location, and other relevant attributes that can be used to understand the patterns and factors contributing to late acknowledgments. Let's start by loading the data and taking a look at the first few rows to understand its structure and contents.<br>



```{r, message = FALSE}
library(tidyverse)
library(DT)
library(lubridate)

```

```{r, include=FALSE}
library(readxl)
library(writexl)
order_late <- readxl::read_excel("anonymized_data.xlsx") 
order_late <- order_late %>% 
  dplyr::mutate(order_date = as.Date(order_date),
                delivery_date = as.Date(delivery_date),
                ship_date = as.Date(ship_date),
                date_acknowledge = as.Date(date_acknowledge),
                date_acknowledgement_calc = as.Date(date_acknowledgement_calc)) 
```


```{r, warning=FALSE}
order_late %>%
  DT::datatable(options = list(scrollX = TRUE))

```

### Data Description:
- profile_owner: The identifier of the individual who owns the profile related to the order.

- leader_name: The identifier of the leadership or supervisory figure associated with the order or the profile owner.

- loc: A code or number that represents the location where the order was processed or is to be fulfilled from.

- order: The unique identifier assigned to the order.

- customer: The name of the individual or entity to whom the order will be delivered.

- order_date: The date on which the order was placed or recorded.

- week_number: The week of the year when the order was placed, which could be useful for seasonal analysis.

- delivery_date: The date when the order is scheduled to be delivered to the customer.

- ship_date: The actual date when the order was shipped out from the facility.

- date_acknowledge: The date on which the order acknowledgment was recorded in the system.

- date_acknowledgement_calc: Calculated date for when the order was supposed to be acknowledged, possibly used for performance tracking.

- days_to_acknowledge: The number of days it took to acknowledge the order from the order date, a measure of processing time.

- on_time: An indicator of whether the order acknowledgment was within the expected time frame, with values like 'On Time' = 1 or 'Not on Time = 0

These columns together can provide valuable insights into the order processing efficiency and timeliness. Understanding patterns and relationships within these columns through clustering or other data analysis methods could help in identifying bottlenecks, predicting future performance, and improving overall service delivery.



## 2. Descriptive Analysis <br>
Before diving into complex analytical techniques, it's crucial to start with a descriptive analysis of our dataset. This beginning step will allow us to understand the basic characteristics of the data, identify any immediate patterns, and set the stage for more in-depth analysis.

### 2-1. Summary Statistics <br>

```{r}
order_late %>% dplyr::summarise(
  Mean = mean(days_to_acknowledge, na.rm = TRUE),
  Median = median(days_to_acknowledge, na.rm = TRUE),
  Min = min(days_to_acknowledge, na.rm = TRUE),
  Max = max(days_to_acknowledge, na.rm = TRUE),
  SD = sd(days_to_acknowledge, na.rm = TRUE)
)



```
- Mean: The average number of days to acknowledge an order is approximately 51.66 days. This indicates the central tendency of our dataset, suggesting that on average, orders take about 52 days to be acknowledged.<br>
- Median: The median days to acknowledge is 52, which means half of the orders are acknowledged in less than 52 days, and the other half takes longer.<br>
- Minimum (Min): The fastest acknowledgment time recorded is 2 days, indicating that some orders are acknowledged almost immediately after being placed.<br>
- Maximum (Max): On the other end, the longest time taken to acknowledge an order is 105 days, suggesting significant delays in some cases.<br>
- Standard Deviation (SD): With a standard deviation of approximately 31.99, there's considerable variability in the acknowledgment times. This high variability indicates that the acknowledgment process's efficiency varies widely across different orders.<br><br>

- The considerable gap between the minimum and maximum values, along with a high standard deviation, suggests that while some orders are processed efficiently, others face substantial delays. <br>

### 2-2. Distribution of Days to Acknowledge
```{r}
order_late %>% 
  ggplot(aes(x = days_to_acknowledge)) +
  geom_histogram(binwidth = 1, fill = "skyblue", color = "black") +
  labs(title = "Distribution of Days to Acknowledge",
       x = "Days to Acknowledge",
       y = "Frequency") +
  theme_minimal()


```



### 2-3. Distribution of Days to Acknowledge by Profile Owner
```{r}
order_late %>% 
  ggplot(aes(x = days_to_acknowledge)) +
  geom_histogram(binwidth = 1, fill = "skyblue", color = "black") +
  labs(title = "Distribution of Days to Acknowledge by Profile Owner",
       x = "Days to Acknowledge",
       y = "Frequency") +
  facet_wrap(~profile_owner) +
  theme_minimal()


```

### 2-4. Distribution of Days to Acknowledge by Location
```{r}
order_late %>% 
  ggplot(aes(x = days_to_acknowledge)) +
  geom_histogram(binwidth = 1, fill = "skyblue", color = "black") +
  labs(title = "Distribution of Days to Acknowledge by Location",
       x = "Days to Acknowledge",
       y = "Frequency") +
  facet_wrap(~loc) +
  theme_minimal()

```

### 2-5. Distribution of Days to Acknowledge by Leader
```{r}
order_late %>% 
  ggplot(aes(x = days_to_acknowledge)) +
  geom_histogram(binwidth = 1, fill = "skyblue", color = "black") +
  labs(title = "Distribution of Days to Acknowledge by Leader",
       x = "Days to Acknowledge",
       y = "Frequency") +
  facet_wrap(~leader_name) +
  theme_minimal()

```

### 2-6. Distribution of Days to Acknowledge by Week Number
```{r}
order_late %>% 
  ggplot(aes(x = days_to_acknowledge)) +
  geom_histogram(binwidth = 1, fill = "skyblue", color = "black") +
  labs(title = "Distribution of Days to Acknowledge by Week Number",
       x = "Days to Acknowledge",
       y = "Frequency") +
  facet_wrap(~week_number) +
  theme_minimal()
```

### 2-7. Summary Statistics by On Time
```{r}
order_late %>%
  group_by(on_time) %>%
  summarise(
    Mean_days_to_acknowledge = mean(days_to_acknowledge, na.rm = TRUE),
    Median_days_to_acknowledge = median(days_to_acknowledge, na.rm = TRUE),
    SD_days_to_acknowledge = sd(days_to_acknowledge, na.rm = TRUE),
    Min_days_to_acknowledge = min(days_to_acknowledge, na.rm = TRUE),
    Max_days_to_acknowledge = max(days_to_acknowledge, na.rm = TRUE),
    Count = n()
  )
```


### 2-8. Distribution of Days to Acknowledge by On Time

```{r}
order_late %>% 
  ggplot(aes(x = days_to_acknowledge)) +
  geom_histogram(binwidth = 1, fill = "skyblue", color = "black") +
  labs(title = "Distribution of Days to Acknowledge by On Time",
       x = "Days to Acknowledge",
       y = "Frequency") +
  facet_wrap(~on_time) +
  theme_minimal()

```




# Next: write up start from 2-2. clear what I've done so far. add comment. and develop the thoughts what to do next and why we need to look at the clustering analysis further which this descriptive analysis doesn't fully explain. (also add, for more reactive and descriptive plots and tables dashboard, please visit the link below.) if you need to add more descriptive plots here, feel free to add. 



------------------------------------------------------------------------

------------------------------------------------------------------------

::: {#footer}
```{r echo=FALSE, results='asis'}
cat("Copyright © 2023-", format(Sys.Date(), "%Y"), "Sangho Lee, All rights reserved.")
```
:::




